(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function l(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(s){if(s.ep)return;s.ep=!0;const n=l(s);fetch(s.href,n)}})();const y=.3,$=1.7,k=0,M=10,P=.5,A=.5,w=3e4,L=100,g=.5,p=1;function u(t,e){return t+Math.random()*(e-t)}function N(t){const e=Math.random()<P,r=Math.random()<A?"to bottom":"to right";if(t>=0&&t<5){const n=30+t*5,i=5+t*2;return e?{type:"gradient",colors:[`hsl(230, ${n}%, ${i-2}%)`,`hsl(250, ${n-5}%, ${i+3}%)`],direction:r}:{type:"solid",color:`hsl(240, ${n}%, ${i}%)`}}else if(t>=5&&t<7){const s=t-5,n=50-s*10,i=85-s*5,o=60+s*10;return e?{type:"gradient",colors:[`hsl(${n-5}, ${i+5}%, ${o-5}%)`,`hsl(${n+10}, ${i-5}%, ${o+10}%)`],direction:r}:{type:"solid",color:`hsl(${n}, ${i}%, ${o}%)`}}else if(t>=7&&t<12){const s=t-7,n=220-s*4,i=70-s*5,o=70+s*2;return e?{type:"gradient",colors:[`hsl(${n-5}, ${i+5}%, ${o-5}%)`,`hsl(${n+5}, ${i-5}%, ${o+5}%)`],direction:r}:{type:"solid",color:`hsl(${n}, ${i}%, ${o}%)`}}else if(t>=12&&t<17){const s=t-12,n=200+s*5,i=55-s*3,o=80-s*3;return e?{type:"gradient",colors:[`hsl(${n-5}, ${i+5}%, ${o-3}%)`,`hsl(${n+5}, ${i-5}%, ${o+3}%)`],direction:r}:{type:"solid",color:`hsl(${n}, ${i}%, ${o}%)`}}else if(t>=17&&t<20){const s=t-17,n=s<1.5?20-s*10:355-(s-1.5)*20,i=85-s*8,o=55-s*10;return e?{type:"gradient",colors:[`hsl(${n-10}, ${i+10}%, ${o-5}%)`,`hsl(${n+15}, ${i-5}%, ${o+10}%)`],direction:r}:{type:"solid",color:`hsl(${n}, ${i}%, ${o}%)`}}else{const n=40-(t-20)*5,i=15-(t-20)*3;return e?{type:"gradient",colors:[`hsl(230, ${n+5}%, ${i-2}%)`,`hsl(250, ${n-5}%, ${i+2}%)`],direction:r}:{type:"solid",color:`hsl(240, ${n}%, ${i}%)`}}}function D(t){if(t>=5&&t<7||t>=17&&t<20||Math.random()<.3){const l=[25,33,50,67,75],r=Math.floor(Math.random()*l.length);return{type:"split",splitPosition:l[r]}}return{type:"full"}}function v(t){const e=document.createElement("div");if(e.className="block-wrapper",e.id=`block-${t.id}`,t.currentHeight===void 0){const r=u(y,$);e.style.height=`${t.height*r}%`}else e.style.height=`${Math.max(t.currentHeight,2)}%`;const l=u(k,M);if(e.style.setProperty("--delay",`${l}s`),t.type.type==="full"){const r=document.createElement("div");if(r.className="block",t.color.type==="solid")r.style.backgroundColor=t.color.color;else{const n=t.color.direction||"to right";r.style.background=`linear-gradient(${n}, ${t.color.colors[0]}, ${t.color.colors[1]})`}const s=g+u(-1,p);r.style.filter=`blur(${s.toFixed(2)}px)`,e.appendChild(r)}else{const r=document.createElement("div");r.className="split-block";const s=document.createElement("div");s.className="split-left",s.style.width=`${t.type.splitPosition}%`;const n=document.createElement("div");if(n.className="split-right",n.style.width=`${100-t.type.splitPosition}%`,t.color.type==="solid"){const o=t.color.color.match(/hsl\((\d+),\s*(\d+)%,\s*(\d+)%\)/);if(o){const c=parseInt(o[1]),a=parseInt(o[2]),h=parseInt(o[3]);s.style.backgroundColor=`hsl(${c-5}, ${a}%, ${h-3}%)`,n.style.backgroundColor=`hsl(${c+5}, ${a}%, ${h+3}%)`}else s.style.backgroundColor=t.color.color,n.style.backgroundColor=t.color.color}else{const o=t.color.direction||"to right";s.style.background=`linear-gradient(${o}, ${t.color.colors[0]}, ${t.color.colors[1]})`,n.style.background=`linear-gradient(${o}, ${t.color.colors[1]}, ${t.color.colors[0]})`}const i=g+u(-1,p);r.style.filter=`blur(${i.toFixed(2)}px)`,r.appendChild(s),r.appendChild(n),e.appendChild(r)}return e}function R(t){if(t.length===0)return;const e=100;if(t.length>0){const o=t[0],c=Date.now()-o.timestamp;o.growthProgress=Math.min(c/w,1);const a=Math.pow(o.growthProgress,.5);o.currentHeight=2+o.height*o.heightFactor*a}const l=t.length>0?t[0].currentHeight:0,r=e-l;let s=0;for(let o=1;o<t.length;o++)s+=t[o].height*t[o].heightFactor;const n=.2;let i=s>0?r/s:0;return i=Math.max(i,n),t.map((o,c)=>{let a;if(c===0)a=o.currentHeight;else{const I=o.height*o.heightFactor*i;a=Math.max(I,3);const E=Date.now()-o.timestamp,H=3e3+o.id%5*500,b=.01+o.id%10*.002,B=o.id%100*.0628,T=1+b*Math.sin(E/H+B);a*=T}const h=Math.min(c/(t.length-1||1),1),C=g+h*p;return{id:o.id,targetHeight:a,zIndex:t.length-c,blurAmount:C.toFixed(2)}})}function _(t){return t.color.type==="solid"?t.color.color:`linear-gradient(${t.color.direction||"to right"}, ${t.color.colors[0]}, ${t.color.colors[1]})`}const d=24,m=5,f=0;class x{constructor(e,l){this.blocks=[],this.blocksContainer=e,this.onUpdateCounter=l}addBlock(e){const l=N(e),r=D(e),s=100/Math.min(d,24)*.98;let n;Math.random()<.2?n=s*(Math.random()<.5?u(.4,.7):u(1.5,2.2)):n=s*u(.8,1.4);const i={id:Date.now(),hour:e,color:l,type:r,height:n,currentHeight:2,timestamp:Date.now(),heightFactor:u(y,$),growthProgress:0};this.blocks.unshift(i),this.blocks.length>d&&(this.blocks=this.blocks.slice(0,d));const o=v(i);o.style.height=`${i.currentHeight}%`,o.style.zIndex=this.blocks.length,this.blocksContainer.firstChild?this.blocksContainer.insertBefore(o,this.blocksContainer.firstChild):this.blocksContainer.appendChild(o);const c=this.blocksContainer.querySelectorAll(".block-wrapper");if(c.length>d)for(let h=d;h<c.length;h++)this.blocksContainer.removeChild(c[h]);const a=_(i);return document.body.style.background=a,this.updateBlockCounter(),i}applyHeightUpdates(e){e&&e.forEach(({id:l,targetHeight:r,zIndex:s,blurAmount:n})=>{const i=document.getElementById(`block-${l}`);if(i&&(i.style.height=`${r*1.05}%`,i.style.zIndex=s,n!==void 0)){const o=i.querySelector(".block, .split-block");o&&(o.style.filter=`blur(${n}px)`)}})}updateBlockCounter(){this.onUpdateCounter&&this.onUpdateCounter(this.blocks.length)}reset(){this.blocks=[],this.blocksContainer.innerHTML=""}getBlocks(){return this.blocks}}function O(t,e){return`${t.toString().padStart(2,"0")}:${e.toString().padStart(2,"0")}`}class F{constructor(e,l,r){this.timeDisplay=e.timeDisplay,this.blockCounter=e.blockCounter,this.pauseButton=e.pauseButton,this.resetButton=e.resetButton,this.toggleInterface=e.toggleInterface,this.interfaceElement=e.interfaceElement,this.keyIndicator=document.getElementById("key-indicator"),this.currentHour=m,this.currentMinute=f,this.isPaused=!1,this.showInterface=!0,this.keyIndicatorTimeout=null,this.onReset=l,this.onTogglePause=r,this.setupEventListeners(),this.updateTimeDisplay()}setupEventListeners(){this.resetButton.addEventListener("click",()=>this.handleReset()),this.toggleInterface.addEventListener("click",()=>this.handleToggleInterface()),this.pauseButton.addEventListener("click",()=>this.handleTogglePause()),document.addEventListener("keydown",e=>{e.key.toLowerCase()==="h"&&this.handleToggleInterface()})}updateTimeDisplay(){this.timeDisplay.textContent="time: "+O(this.currentHour,this.currentMinute)}updateBlockCounter(e){this.blockCounter.textContent=`blocks: ${e}`}handleReset(){this.currentHour=m,this.currentMinute=f,this.updateTimeDisplay(),this.onReset&&this.onReset()}handleToggleInterface(){this.showInterface=!this.showInterface,this.showInterface?this.interfaceElement.classList.remove("hidden"):this.interfaceElement.classList.add("hidden")}handleTogglePause(){this.isPaused=!this.isPaused,this.pauseButton.textContent=this.isPaused?"Play":"Pause",this.onTogglePause&&this.onTogglePause(this.isPaused)}advanceTime(){return this.isPaused?!1:(this.currentMinute=(this.currentMinute+1)%60,this.updateTimeDisplay(),this.currentMinute===0?(this.currentHour=(this.currentHour+1)%24,!0):!1)}getCurrentHour(){return this.currentHour}isPaused(){return this.isPaused}}class S{constructor(){this.blocksContainer=document.getElementById("blocks-container"),this.timeDisplay=document.getElementById("time-display"),this.blockCounter=document.getElementById("block-counter"),this.pauseButton=document.getElementById("pause-button"),this.resetButton=document.getElementById("reset-button"),this.toggleInterface=document.getElementById("toggle-interface"),this.interfaceElement=document.getElementById("interface"),this.initComponents(),this.isPaused=!1,this.timers={minute:null,animation:null}}initComponents(){this.ui=new F({timeDisplay:this.timeDisplay,blockCounter:this.blockCounter,pauseButton:this.pauseButton,resetButton:this.resetButton,toggleInterface:this.toggleInterface,interfaceElement:this.interfaceElement},()=>this.handleReset(),e=>this.handlePauseToggle(e)),this.blockManager=new x(this.blocksContainer,e=>this.ui.updateBlockCounter(e))}init(){this.blockManager.addBlock(m),this.startTimers()}startTimers(){this.timers.minute=setInterval(()=>{this.ui.advanceTime()&&this.blockManager.addBlock(this.ui.getCurrentHour())},1e3),this.timers.animation=setInterval(()=>{if(this.isPaused)return;const e=this.blockManager.getBlocks(),l=R(e);this.blockManager.applyHeightUpdates(l)},L)}handleReset(){this.blockManager.reset(),this.blockManager.addBlock(this.ui.getCurrentHour())}handlePauseToggle(e){this.isPaused=e}destroy(){clearInterval(this.timers.minute),clearInterval(this.timers.animation)}}document.addEventListener("DOMContentLoaded",()=>{const t=new S;t.init(),window.horizonApp=t});
