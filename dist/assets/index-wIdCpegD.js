(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function c(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=c(a);fetch(a.href,i)}})();const k=.1,H=2.2,N=0,A=10,_=.5,w=.5,O=6e4,D=100,E=.1,B=.5,L=60,v=120,y=10,I=90,S=5e3,R=12e3;function u(t,s){return t+Math.random()*(s-t)}function x(t){const s=Math.random()<_,r=Math.random()<w?"to bottom":"to right",i=Math.random()<.1?20:0;if(t>=0&&t<5){const e=30+t*5+i,n=5+t*2;return s?{type:"gradient",colors:[`hsl(230, ${e+15}%, ${n-2}%)`,`hsl(250, ${e-15}%, ${n+3}%)`],direction:r}:{type:"solid",color:`hsl(240, ${e}%, ${n}%)`}}else if(t>=5&&t<7){const o=t-5,e=50-o*10,n=50-o*5+i,l=60+o*10;return s?{type:"gradient",colors:[`hsl(${e-5}, ${n+15}%, ${l-5}%)`,`hsl(${e+10}, ${n-15}%, ${l+10}%)`],direction:r}:{type:"solid",color:`hsl(${e}, ${n}%, ${l}%)`}}else if(t>=7&&t<12){const o=t-7,e=220-o*4,n=50-o*5+i,l=70+o*2;return s?{type:"gradient",colors:[`hsl(${e-5}, ${n+20}%, ${l-5}%)`,`hsl(${e+5}, ${n-15}%, ${l+5}%)`],direction:r}:{type:"solid",color:`hsl(${e}, ${n}%, ${l}%)`}}else if(t>=12&&t<17){const o=t-12,e=200+o*5,n=25-o*3+i,l=80-o*3;return s?{type:"gradient",colors:[`hsl(${e-5}, ${n+25}%, ${l-3}%)`,`hsl(${e+5}, ${n-15}%, ${l+3}%)`],direction:r}:{type:"solid",color:`hsl(${e}, ${n}%, ${l}%)`}}else if(t>=17&&t<20){const o=t-17,e=o<1.5?15-o*8:340-(o-1.5)*15,n=75-o*8+i,l=55-o*10;return s?{type:"gradient",colors:[`hsl(${e-10}, ${n+15}%, ${l-5}%)`,`hsl(${e+25}, ${n-10}%, ${l+10}%)`],direction:r}:{type:"solid",color:`hsl(${e}, ${n}%, ${l}%)`}}else{const o=[{hue:240,sat:40+i,light:15},{hue:260,sat:50+i,light:20},{hue:280,sat:55+i,light:18},{hue:300,sat:45+i,light:16},{hue:325,sat:50+i,light:18},{hue:350,sat:55+i,light:17}],e=Math.floor(Math.random()*o.length),n=o[e];if(s){const l=(e+1+Math.floor(Math.random()*2))%o.length,h=o[l];return{type:"gradient",colors:[`hsl(${n.hue}, ${n.sat+15}%, ${n.light-2}%)`,`hsl(${h.hue}, ${h.sat}%, ${h.light+5}%)`],direction:r}}else return{type:"solid",color:`hsl(${n.hue}, ${n.sat}%, ${n.light}%)`}}}function U(t){if(Math.random()<.3){const s=[25,33,50,67,75],c=Math.floor(Math.random()*s.length);return{type:"split",splitPosition:s[c]}}return{type:"full"}}function F(t){const s=document.createElement("div");if(s.className="block-wrapper",s.id=`block-${t.id}`,t.currentHeight===void 0){const r=u(k,H);s.style.height=`${t.height*r}%`}else s.style.height=`${t.currentHeight}%`;const c=u(N,A);if(s.style.setProperty("--delay",`${c}s`),s.style.position="relative",s.style.marginBottom="-1px",t.type.type==="full"){const r=document.createElement("div");if(r.className="block",t.color.type==="solid")r.style.backgroundColor=t.color.color;else{const i=t.color.direction||"to right";r.style.background=`linear-gradient(${i}, ${t.color.colors[0]}, ${t.color.colors[1]})`}const a=E+u(-.5,B);r.style.filter=`blur(${a.toFixed(2)}px)`,s.appendChild(r)}else{const r=document.createElement("div");r.className="split-block";const a=document.createElement("div");a.className="split-left",a.style.width=`${t.type.splitPosition}%`;const i=document.createElement("div");i.className="split-right",i.style.width=`${100-t.type.splitPosition}%`;{let e=t.type.splitPosition,n=e,l=!1;const h=(g,f)=>{const d=Math.abs(f-g),M=u(L,v)*(d/50);return a.style.transition=`width ${M}s ease-in-out`,i.style.transition=`width ${M}s ease-in-out`,M*1e3},$=g=>{let d;return Math.random()<.67?d=u(y,I):d=Math.random()<.5?u(y,y+15):u(I-15,I),Math.abs(d-g)<15&&(d=g+(g<50?15:-15),d=Math.max(y,Math.min(I,d))),d},p=()=>{if(l)return;n=$(e);const g=h(e,n);l=!0,a.style.width=`${n}%`,i.style.width=`${100-n}%`,setTimeout(()=>{e=n,l=!1},g),setTimeout(p,g+u(S,R))},T=u(1e3,7e3),C=setTimeout(p,T);r.dataset.animationTimeout=C}if(t.color.type==="solid"){const e=t.color.color.match(/hsl\((\d+),\s*(\d+)%,\s*(\d+)%\)/);if(e){const n=parseInt(e[1]),l=parseInt(e[2]),h=parseInt(e[3]);a.style.backgroundColor=`hsl(${n-5}, ${l}%, ${h-3}%)`,i.style.backgroundColor=`hsl(${n+5}, ${l}%, ${h+3}%)`}else a.style.backgroundColor=t.color.color,i.style.backgroundColor=t.color.color}else{const e=t.color.direction||"to right";a.style.background=`linear-gradient(${e}, ${t.color.colors[0]}, ${t.color.colors[1]})`,i.style.background=`linear-gradient(${e}, ${t.color.colors[1]}, ${t.color.colors[0]})`}const o=E+u(-.5,B);r.style.filter=`blur(${o.toFixed(2)}px)`,r.appendChild(a),r.appendChild(i),s.appendChild(r)}return s}function G(t){if(t.length===0)return;const s=100;if(t.length>0){const e=t[0],n=Date.now()-e.timestamp;e.growthProgress=Math.min(n/O,1);const l=Math.pow(e.growthProgress,.3);t.length===1?e.currentHeight=.05+(s-.05)*l:e.currentHeight=.05+e.height*e.heightFactor*l}const c=t.length>0?t[0].currentHeight:0,r=s-c;let a=0;for(let e=1;e<t.length;e++)a+=t[e].height*t[e].heightFactor;const i=.2;let o=a>0?r/a:0;return o=Math.max(o,i),t.map((e,n)=>{let l;if(n===0)l=e.currentHeight;else{const p=e.height*e.heightFactor*o;l=Math.max(p,.1);const T=Date.now()-e.timestamp,C=3e3+e.id%5*500,g=.01+e.id%10*.002,f=e.id%100*.0628,d=1+g*Math.sin(T/C+f);l*=d}const h=Math.min(n/(t.length-1||1),1),$=E+h*B;return{id:e.id,targetHeight:l,zIndex:t.length-n,blurAmount:$.toFixed(2)}})}function q(t){return t.color.type==="solid"?t.color.color:`linear-gradient(${t.color.direction||"to right"}, ${t.color.colors[0]}, ${t.color.colors[1]})`}const m=24,b=5,P=0;class X{constructor(s,c){this.blocks=[],this.blocksContainer=s,this.onUpdateCounter=c}addBlock(s){const c=x(s),r=U(),a=100/Math.min(m,24)*.96;let i;Math.random()<.2?i=a*(Math.random()<.1?u(.2,.7):u(1.5,2.2)):i=a*u(.8,1.4);const o={id:Date.now(),hour:s,color:c,type:r,height:i,currentHeight:.05,timestamp:Date.now(),heightFactor:u(k,H),growthProgress:0};this.blocks.unshift(o),this.blocks.length>m&&(this.blocks=this.blocks.slice(0,m));const e=F(o);e.style.height=`${o.currentHeight}%`,e.style.zIndex=this.blocks.length,this.blocksContainer.firstChild?this.blocksContainer.insertBefore(e,this.blocksContainer.firstChild):this.blocksContainer.appendChild(e);const n=this.blocksContainer.querySelectorAll(".block-wrapper");if(n.length>m)for(let h=m;h<n.length;h++)this.blocksContainer.removeChild(n[h]);const l=q(o);return document.body.style.background=l,this.updateBlockCounter(),o}applyHeightUpdates(s){s&&s.forEach(({id:c,targetHeight:r,zIndex:a,blurAmount:i})=>{const o=document.getElementById(`block-${c}`);if(o&&(o.style.height=`${r*1.06}%`,o.style.zIndex=a,i!==void 0)){const e=o.querySelector(".block, .split-block");e&&(e.style.filter=`blur(${i}px)`)}})}updateBlockCounter(){this.onUpdateCounter&&this.onUpdateCounter(this.blocks.length)}reset(){this.blocks=[],this.blocksContainer.innerHTML=""}getBlocks(){return this.blocks}removeBlock(s){const c=document.getElementById(`block-${s}`);if(c){const r=c.querySelector(".split-block");r&&(r.dataset.animationInterval&&clearInterval(parseInt(r.dataset.animationInterval)),r.dataset.animationTimeout&&clearTimeout(parseInt(r.dataset.animationTimeout))),c.remove()}this.blocks=this.blocks.filter(r=>r.id!==s)}}function z(t,s){return`${t.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`}class V{constructor(s,c,r){this.timeDisplay=s.timeDisplay,this.blockCounter=s.blockCounter,this.pauseButton=s.pauseButton,this.resetButton=s.resetButton,this.toggleInterface=s.toggleInterface,this.interfaceElement=s.interfaceElement,this.keyIndicator=document.getElementById("key-indicator"),this.currentHour=b,this.currentMinute=P,this.isPaused=!1,this.showInterface=!0,this.keyIndicatorTimeout=null,this.onReset=c,this.onTogglePause=r,this.setupEventListeners(),this.updateTimeDisplay()}setupEventListeners(){this.resetButton.addEventListener("click",()=>this.handleReset()),this.toggleInterface.addEventListener("click",()=>this.handleToggleInterface()),this.pauseButton.addEventListener("click",()=>this.handleTogglePause()),document.addEventListener("keydown",s=>{s.key.toLowerCase()==="h"&&this.handleToggleInterface()})}updateTimeDisplay(){this.timeDisplay.textContent="time: "+z(this.currentHour,this.currentMinute)}updateBlockCounter(s){this.blockCounter.textContent=`blocks: ${s}`}handleReset(){this.currentHour=b,this.currentMinute=P,this.updateTimeDisplay(),this.onReset&&this.onReset()}handleToggleInterface(){this.showInterface=!this.showInterface,this.showInterface?this.interfaceElement.classList.remove("hidden"):this.interfaceElement.classList.add("hidden")}handleTogglePause(){this.isPaused=!this.isPaused,this.pauseButton.textContent=this.isPaused?"Play":"Pause",this.onTogglePause&&this.onTogglePause(this.isPaused)}advanceTime(){return this.isPaused?!1:(this.currentMinute=(this.currentMinute+1)%60,this.updateTimeDisplay(),this.currentMinute===0?(this.currentHour=(this.currentHour+1)%24,!0):!1)}getCurrentHour(){return this.currentHour}isPaused(){return this.isPaused}}class K{constructor(){this.blocksContainer=document.getElementById("blocks-container"),this.timeDisplay=document.getElementById("time-display"),this.blockCounter=document.getElementById("block-counter"),this.pauseButton=document.getElementById("pause-button"),this.resetButton=document.getElementById("reset-button"),this.toggleInterface=document.getElementById("toggle-interface"),this.interfaceElement=document.getElementById("interface"),this.initComponents(),this.isPaused=!1,this.timers={minute:null,animation:null}}initComponents(){this.ui=new V({timeDisplay:this.timeDisplay,blockCounter:this.blockCounter,pauseButton:this.pauseButton,resetButton:this.resetButton,toggleInterface:this.toggleInterface,interfaceElement:this.interfaceElement},()=>this.handleReset(),s=>this.handlePauseToggle(s)),this.blockManager=new X(this.blocksContainer,s=>this.ui.updateBlockCounter(s))}init(){this.blockManager.addBlock(b),this.startTimers()}startTimers(){this.timers.minute=setInterval(()=>{this.ui.advanceTime()&&this.blockManager.addBlock(this.ui.getCurrentHour())},1e3),this.timers.animation=setInterval(()=>{if(this.isPaused)return;const s=this.blockManager.getBlocks(),c=G(s);this.blockManager.applyHeightUpdates(c)},D)}handleReset(){this.blockManager.reset(),this.blockManager.addBlock(this.ui.getCurrentHour())}handlePauseToggle(s){this.isPaused=s}destroy(){clearInterval(this.timers.minute),clearInterval(this.timers.animation)}}document.addEventListener("DOMContentLoaded",()=>{const t=new K;t.init(),window.horizonApp=t});
