(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function a(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(n){if(n.ep)return;n.ep=!0;const i=a(n);fetch(n.href,i)}})();const B=.1,k=2.2,N=0,A=10,_=.5,w=.5,O=6e4,D=100,E=.1,b=.5,L=60,v=120,y=10,$=90,R=5e3,S=12e3;function h(t,e){return t+Math.random()*(e-t)}function U(t){const e=Math.random()<_,r=Math.random()<w?"to bottom":"to right";if(t>=0&&t<5){const i=30+t*5,o=5+t*2;return e?{type:"gradient",colors:[`hsl(230, ${i+15}%, ${o-2}%)`,`hsl(250, ${i-15}%, ${o+3}%)`],direction:r}:{type:"solid",color:`hsl(240, ${i}%, ${o}%)`}}else if(t>=5&&t<7){const n=t-5,i=50-n*10,o=85-n*5,s=60+n*10;return e?{type:"gradient",colors:[`hsl(${i-5}, ${o+15}%, ${s-5}%)`,`hsl(${i+10}, ${o-15}%, ${s+10}%)`],direction:r}:{type:"solid",color:`hsl(${i}, ${o}%, ${s}%)`}}else if(t>=7&&t<12){const n=t-7,i=220-n*4,o=70-n*5,s=70+n*2;return e?{type:"gradient",colors:[`hsl(${i-5}, ${o+20}%, ${s-5}%)`,`hsl(${i+5}, ${o-15}%, ${s+5}%)`],direction:r}:{type:"solid",color:`hsl(${i}, ${o}%, ${s}%)`}}else if(t>=12&&t<17){const n=t-12,i=200+n*5,o=55-n*3,s=80-n*3;return e?{type:"gradient",colors:[`hsl(${i-5}, ${o+25}%, ${s-3}%)`,`hsl(${i+5}, ${o-15}%, ${s+3}%)`],direction:r}:{type:"solid",color:`hsl(${i}, ${o}%, ${s}%)`}}else if(t>=17&&t<20){const n=t-17,i=n<1.5?20-n*10:355-(n-1.5)*20,o=85-n*8,s=55-n*10;return e?{type:"gradient",colors:[`hsl(${i-10}, ${o+15}%, ${s-5}%)`,`hsl(${i+15}, ${o-20}%, ${s+10}%)`],direction:r}:{type:"solid",color:`hsl(${i}, ${o}%, ${s}%)`}}else{const i=40-(t-20)*5,o=15-(t-20)*3;return e?{type:"gradient",colors:[`hsl(230, ${i+20}%, ${o-2}%)`,`hsl(250, ${i-15}%, ${o+2}%)`],direction:r}:{type:"solid",color:`hsl(240, ${i}%, ${o}%)`}}}function x(t){if(t>=5&&t<7||t>=17&&t<20||Math.random()<.3){const a=[25,33,50,67,75],r=Math.floor(Math.random()*a.length);return{type:"split",splitPosition:a[r]}}return{type:"full"}}function F(t){const e=document.createElement("div");if(e.className="block-wrapper",e.id=`block-${t.id}`,t.currentHeight===void 0){const r=h(B,k);e.style.height=`${t.height*r}%`}else e.style.height=`${t.currentHeight}%`;const a=h(N,A);if(e.style.setProperty("--delay",`${a}s`),t.type.type==="full"){const r=document.createElement("div");if(r.className="block",t.color.type==="solid")r.style.backgroundColor=t.color.color;else{const i=t.color.direction||"to right";r.style.background=`linear-gradient(${i}, ${t.color.colors[0]}, ${t.color.colors[1]})`}const n=E+h(-.5,b);r.style.filter=`blur(${n.toFixed(2)}px)`,e.appendChild(r)}else{const r=document.createElement("div");r.className="split-block";const n=document.createElement("div");n.className="split-left",n.style.width=`${t.type.splitPosition}%`;const i=document.createElement("div");i.className="split-right",i.style.width=`${100-t.type.splitPosition}%`;{let s=t.type.splitPosition,l=s,c=!1;const d=(g,f)=>{const u=Math.abs(f-g),M=h(L,v)*(u/50);return n.style.transition=`width ${M}s ease-in-out`,i.style.transition=`width ${M}s ease-in-out`,M*1e3},I=g=>{let u;return Math.random()<.67?u=h(y,$):u=Math.random()<.5?h(y,y+15):h($-15,$),Math.abs(u-g)<15&&(u=g+(g<50?15:-15),u=Math.max(y,Math.min($,u))),u},p=()=>{if(c)return;l=I(s);const g=d(s,l);c=!0,n.style.width=`${l}%`,i.style.width=`${100-l}%`,setTimeout(()=>{s=l,c=!1},g),setTimeout(p,g+h(R,S))},T=h(1e3,7e3),C=setTimeout(p,T);r.dataset.animationTimeout=C}if(t.color.type==="solid"){const s=t.color.color.match(/hsl\((\d+),\s*(\d+)%,\s*(\d+)%\)/);if(s){const l=parseInt(s[1]),c=parseInt(s[2]),d=parseInt(s[3]);n.style.backgroundColor=`hsl(${l-5}, ${c}%, ${d-3}%)`,i.style.backgroundColor=`hsl(${l+5}, ${c}%, ${d+3}%)`}else n.style.backgroundColor=t.color.color,i.style.backgroundColor=t.color.color}else{const s=t.color.direction||"to right";n.style.background=`linear-gradient(${s}, ${t.color.colors[0]}, ${t.color.colors[1]})`,i.style.background=`linear-gradient(${s}, ${t.color.colors[1]}, ${t.color.colors[0]})`}const o=E+h(-.5,b);r.style.filter=`blur(${o.toFixed(2)}px)`,r.appendChild(n),r.appendChild(i),e.appendChild(r)}return e}function G(t){if(t.length===0)return;const e=100;if(t.length>0){const s=t[0],l=Date.now()-s.timestamp;s.growthProgress=Math.min(l/O,1);const c=Math.pow(s.growthProgress,.3);t.length===1?s.currentHeight=.05+(e-.05)*c:s.currentHeight=.05+s.height*s.heightFactor*c}const a=t.length>0?t[0].currentHeight:0,r=e-a;let n=0;for(let s=1;s<t.length;s++)n+=t[s].height*t[s].heightFactor;const i=.2;let o=n>0?r/n:0;return o=Math.max(o,i),t.map((s,l)=>{let c;if(l===0)c=s.currentHeight;else{const p=s.height*s.heightFactor*o;c=Math.max(p,.1);const T=Date.now()-s.timestamp,C=3e3+s.id%5*500,g=.01+s.id%10*.002,f=s.id%100*.0628,u=1+g*Math.sin(T/C+f);c*=u}const d=Math.min(l/(t.length-1||1),1),I=E+d*b;return{id:s.id,targetHeight:c,zIndex:t.length-l,blurAmount:I.toFixed(2)}})}function q(t){return t.color.type==="solid"?t.color.color:`linear-gradient(${t.color.direction||"to right"}, ${t.color.colors[0]}, ${t.color.colors[1]})`}const m=24,H=5,P=0;class X{constructor(e,a){this.blocks=[],this.blocksContainer=e,this.onUpdateCounter=a}addBlock(e){const a=U(e),r=x(e),n=100/Math.min(m,24)*.98;let i;Math.random()<.2?i=n*(Math.random()<.1?h(.2,.7):h(1.5,2.2)):i=n*h(.8,1.4);const o={id:Date.now(),hour:e,color:a,type:r,height:i,currentHeight:.05,timestamp:Date.now(),heightFactor:h(B,k),growthProgress:0};this.blocks.unshift(o),this.blocks.length>m&&(this.blocks=this.blocks.slice(0,m));const s=F(o);s.style.height=`${o.currentHeight}%`,s.style.zIndex=this.blocks.length,this.blocksContainer.firstChild?this.blocksContainer.insertBefore(s,this.blocksContainer.firstChild):this.blocksContainer.appendChild(s);const l=this.blocksContainer.querySelectorAll(".block-wrapper");if(l.length>m)for(let d=m;d<l.length;d++)this.blocksContainer.removeChild(l[d]);const c=q(o);return document.body.style.background=c,this.updateBlockCounter(),o}applyHeightUpdates(e){e&&e.forEach(({id:a,targetHeight:r,zIndex:n,blurAmount:i})=>{const o=document.getElementById(`block-${a}`);if(o&&(o.style.height=`${r*1.05}%`,o.style.zIndex=n,i!==void 0)){const s=o.querySelector(".block, .split-block");s&&(s.style.filter=`blur(${i}px)`)}})}updateBlockCounter(){this.onUpdateCounter&&this.onUpdateCounter(this.blocks.length)}reset(){this.blocks=[],this.blocksContainer.innerHTML=""}getBlocks(){return this.blocks}removeBlock(e){const a=document.getElementById(`block-${e}`);if(a){const r=a.querySelector(".split-block");r&&(r.dataset.animationInterval&&clearInterval(parseInt(r.dataset.animationInterval)),r.dataset.animationTimeout&&clearTimeout(parseInt(r.dataset.animationTimeout))),a.remove()}this.blocks=this.blocks.filter(r=>r.id!==e)}}function z(t,e){return`${t.toString().padStart(2,"0")}:${e.toString().padStart(2,"0")}`}class V{constructor(e,a,r){this.timeDisplay=e.timeDisplay,this.blockCounter=e.blockCounter,this.pauseButton=e.pauseButton,this.resetButton=e.resetButton,this.toggleInterface=e.toggleInterface,this.interfaceElement=e.interfaceElement,this.keyIndicator=document.getElementById("key-indicator"),this.currentHour=H,this.currentMinute=P,this.isPaused=!1,this.showInterface=!0,this.keyIndicatorTimeout=null,this.onReset=a,this.onTogglePause=r,this.setupEventListeners(),this.updateTimeDisplay()}setupEventListeners(){this.resetButton.addEventListener("click",()=>this.handleReset()),this.toggleInterface.addEventListener("click",()=>this.handleToggleInterface()),this.pauseButton.addEventListener("click",()=>this.handleTogglePause()),document.addEventListener("keydown",e=>{e.key.toLowerCase()==="h"&&this.handleToggleInterface()})}updateTimeDisplay(){this.timeDisplay.textContent="time: "+z(this.currentHour,this.currentMinute)}updateBlockCounter(e){this.blockCounter.textContent=`blocks: ${e}`}handleReset(){this.currentHour=H,this.currentMinute=P,this.updateTimeDisplay(),this.onReset&&this.onReset()}handleToggleInterface(){this.showInterface=!this.showInterface,this.showInterface?this.interfaceElement.classList.remove("hidden"):this.interfaceElement.classList.add("hidden")}handleTogglePause(){this.isPaused=!this.isPaused,this.pauseButton.textContent=this.isPaused?"Play":"Pause",this.onTogglePause&&this.onTogglePause(this.isPaused)}advanceTime(){return this.isPaused?!1:(this.currentMinute=(this.currentMinute+1)%60,this.updateTimeDisplay(),this.currentMinute===0?(this.currentHour=(this.currentHour+1)%24,!0):!1)}getCurrentHour(){return this.currentHour}isPaused(){return this.isPaused}}class K{constructor(){this.blocksContainer=document.getElementById("blocks-container"),this.timeDisplay=document.getElementById("time-display"),this.blockCounter=document.getElementById("block-counter"),this.pauseButton=document.getElementById("pause-button"),this.resetButton=document.getElementById("reset-button"),this.toggleInterface=document.getElementById("toggle-interface"),this.interfaceElement=document.getElementById("interface"),this.initComponents(),this.isPaused=!1,this.timers={minute:null,animation:null}}initComponents(){this.ui=new V({timeDisplay:this.timeDisplay,blockCounter:this.blockCounter,pauseButton:this.pauseButton,resetButton:this.resetButton,toggleInterface:this.toggleInterface,interfaceElement:this.interfaceElement},()=>this.handleReset(),e=>this.handlePauseToggle(e)),this.blockManager=new X(this.blocksContainer,e=>this.ui.updateBlockCounter(e))}init(){this.blockManager.addBlock(H),this.startTimers()}startTimers(){this.timers.minute=setInterval(()=>{this.ui.advanceTime()&&this.blockManager.addBlock(this.ui.getCurrentHour())},1e3),this.timers.animation=setInterval(()=>{if(this.isPaused)return;const e=this.blockManager.getBlocks(),a=G(e);this.blockManager.applyHeightUpdates(a)},D)}handleReset(){this.blockManager.reset(),this.blockManager.addBlock(this.ui.getCurrentHour())}handlePauseToggle(e){this.isPaused=e}destroy(){clearInterval(this.timers.minute),clearInterval(this.timers.animation)}}document.addEventListener("DOMContentLoaded",()=>{const t=new K;t.init(),window.horizonApp=t});
