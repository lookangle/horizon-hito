(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const e of i.addedNodes)e.tagName==="LINK"&&e.rel==="modulepreload"&&r(e)}).observe(document,{childList:!0,subtree:!0});function l(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(n){if(n.ep)return;n.ep=!0;const i=l(n);fetch(n.href,i)}})();const y=.3,$=1.7,T=0,b=10,B=.5,M=.5,P=6e4,w=500,g=5,p=2;function h(t,s){return t+Math.random()*(s-t)}function A(t){const s=Math.random()<B,r=Math.random()<M?"to bottom":"to right";if(t>=0&&t<5){const i=30+t*5,e=5+t*2;return s?{type:"gradient",colors:[`hsl(230, ${i}%, ${e-2}%)`,`hsl(250, ${i-5}%, ${e+3}%)`],direction:r}:{type:"solid",color:`hsl(240, ${i}%, ${e}%)`}}else if(t>=5&&t<7){const n=t-5,i=50-n*10,e=85-n*5,o=60+n*10;return s?{type:"gradient",colors:[`hsl(${i-5}, ${e+5}%, ${o-5}%)`,`hsl(${i+10}, ${e-5}%, ${o+10}%)`],direction:r}:{type:"solid",color:`hsl(${i}, ${e}%, ${o}%)`}}else if(t>=7&&t<12){const n=t-7,i=220-n*4,e=70-n*5,o=70+n*2;return s?{type:"gradient",colors:[`hsl(${i-5}, ${e+5}%, ${o-5}%)`,`hsl(${i+5}, ${e-5}%, ${o+5}%)`],direction:r}:{type:"solid",color:`hsl(${i}, ${e}%, ${o}%)`}}else if(t>=12&&t<17){const n=t-12,i=200+n*5,e=55-n*3,o=80-n*3;return s?{type:"gradient",colors:[`hsl(${i-5}, ${e+5}%, ${o-3}%)`,`hsl(${i+5}, ${e-5}%, ${o+3}%)`],direction:r}:{type:"solid",color:`hsl(${i}, ${e}%, ${o}%)`}}else if(t>=17&&t<20){const n=t-17,i=n<1.5?20-n*10:355-(n-1.5)*20,e=85-n*8,o=55-n*10;return s?{type:"gradient",colors:[`hsl(${i-10}, ${e+10}%, ${o-5}%)`,`hsl(${i+15}, ${e-5}%, ${o+10}%)`],direction:r}:{type:"solid",color:`hsl(${i}, ${e}%, ${o}%)`}}else{const i=40-(t-20)*5,e=15-(t-20)*3;return s?{type:"gradient",colors:[`hsl(230, ${i+5}%, ${e-2}%)`,`hsl(250, ${i-5}%, ${e+2}%)`],direction:r}:{type:"solid",color:`hsl(240, ${i}%, ${e}%)`}}}function L(t){if(t>=5&&t<7||t>=17&&t<20||Math.random()<.3){const l=[25,33,50,67,75],r=Math.floor(Math.random()*l.length);return{type:"split",splitPosition:l[r]}}return{type:"full"}}function v(t){const s=document.createElement("div");if(s.className="block-wrapper",s.id=`block-${t.id}`,t.currentHeight===void 0){const r=h(y,$);s.style.height=`${t.height*r}%`}const l=h(T,b);if(s.style.setProperty("--delay",`${l}s`),t.type.type==="full"){const r=document.createElement("div");if(r.className="block",t.color.type==="solid")r.style.backgroundColor=t.color.color;else{const i=t.color.direction||"to right";r.style.background=`linear-gradient(${i}, ${t.color.colors[0]}, ${t.color.colors[1]})`}const n=g+h(-2,p);r.style.filter=`blur(${n.toFixed(2)}px)`,s.appendChild(r)}else{const r=document.createElement("div");r.className="split-block";const n=document.createElement("div");n.className="split-left",n.style.width=`${t.type.splitPosition}%`;const i=document.createElement("div");if(i.className="split-right",i.style.width=`${100-t.type.splitPosition}%`,t.color.type==="solid"){const o=t.color.color.match(/hsl\((\d+),\s*(\d+)%,\s*(\d+)%\)/);if(o){const c=parseInt(o[1]),d=parseInt(o[2]),a=parseInt(o[3]);n.style.backgroundColor=`hsl(${c-5}, ${d}%, ${a-3}%)`,i.style.backgroundColor=`hsl(${c+5}, ${d}%, ${a+3}%)`}else n.style.backgroundColor=t.color.color,i.style.backgroundColor=t.color.color}else{const o=t.color.direction||"to right";n.style.background=`linear-gradient(${o}, ${t.color.colors[0]}, ${t.color.colors[1]})`,i.style.background=`linear-gradient(${o}, ${t.color.colors[1]}, ${t.color.colors[0]})`}const e=g+h(-2,p);r.style.filter=`blur(${e.toFixed(2)}px)`,r.appendChild(n),r.appendChild(i),s.appendChild(r)}return s}function N(t){if(t.length===0)return;const s=100;if(t.length>0){const e=t[0],o=Date.now()-e.timestamp;e.growthProgress=Math.min(o/P,1);const c=Math.pow(e.growthProgress,1/3);e.currentHeight=.05+e.height*e.heightFactor*c}const l=t.length>0?t[0].currentHeight:0,r=s-l;let n=0;for(let e=1;e<t.length;e++)n+=t[e].height*t[e].heightFactor;const i=n>0?r/n:0;return t.map((e,o)=>{let c;if(o===0)c=e.currentHeight;else{c=e.height*e.heightFactor*i;const I=Date.now()-e.timestamp,C=3e3+e.id.charCodeAt(0)%5*500,k=.01+e.id.charCodeAt(1)%10*.002,E=e.id.charCodeAt(2)%100*.0628,H=1+k*Math.sin(I/C+E);c*=H}const d=Math.min(o/(t.length-1||1),1),a=g+d*p;return{id:e.id,targetHeight:c,zIndex:t.length-o,blurAmount:a.toFixed(2)}})}function D(t){return t.color.type==="solid"?t.color.color:`linear-gradient(${t.color.direction||"to right"}, ${t.color.colors[0]}, ${t.color.colors[1]})`}const u=24,m=5,f=0;class R{constructor(s,l){this.blocks=[],this.blocksContainer=s,this.onUpdateCounter=l}addBlock(s){const l=A(s),r=L(s),n=100/Math.min(u,24)*.98;let i;Math.random()<.2?i=n*(Math.random()<.5?h(.4,.7):h(1.5,2.2)):i=n*h(.8,1.4);const e={id:Date.now(),hour:s,color:l,type:r,height:i,currentHeight:.05,timestamp:Date.now(),heightFactor:h(y,$),growthProgress:0};this.blocks.unshift(e),this.blocks.length>u&&(this.blocks=this.blocks.slice(0,u));const o=v(e);o.style.height=`${e.currentHeight}%`,o.style.zIndex=this.blocks.length,this.blocksContainer.firstChild?this.blocksContainer.insertBefore(o,this.blocksContainer.firstChild):this.blocksContainer.appendChild(o);const c=this.blocksContainer.querySelectorAll(".block-wrapper");if(c.length>u)for(let a=u;a<c.length;a++)this.blocksContainer.removeChild(c[a]);const d=D(e);return document.body.style.background=d,this.updateBlockCounter(),e}applyHeightUpdates(s){s&&s.forEach(({id:l,targetHeight:r,zIndex:n,blurAmount:i})=>{const e=document.getElementById(`block-${l}`);if(e&&(e.style.height=`${r*1.05}%`,e.style.zIndex=n,i!==void 0)){const o=e.querySelector(".block, .split-block");o&&(o.style.filter=`blur(${i}px)`)}})}updateBlockCounter(){this.onUpdateCounter&&this.onUpdateCounter(this.blocks.length)}reset(){this.blocks=[],this.blocksContainer.innerHTML=""}getBlocks(){return this.blocks}}function _(t,s){return`${t.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`}class O{constructor(s,l,r){this.timeDisplay=s.timeDisplay,this.blockCounter=s.blockCounter,this.pauseButton=s.pauseButton,this.resetButton=s.resetButton,this.toggleInterface=s.toggleInterface,this.interfaceElement=s.interfaceElement,this.keyIndicator=document.getElementById("key-indicator"),this.currentHour=m,this.currentMinute=f,this.isPaused=!1,this.showInterface=!0,this.keyIndicatorTimeout=null,this.onReset=l,this.onTogglePause=r,this.setupEventListeners(),this.updateTimeDisplay()}setupEventListeners(){this.resetButton.addEventListener("click",()=>this.handleReset()),this.toggleInterface.addEventListener("click",()=>this.handleToggleInterface()),this.pauseButton.addEventListener("click",()=>this.handleTogglePause()),document.addEventListener("keydown",s=>{s.key.toLowerCase()==="h"&&(this.handleToggleInterface(),this.showKeyIndicator())})}showKeyIndicator(){this.keyIndicatorTimeout&&clearTimeout(this.keyIndicatorTimeout),this.keyIndicator.textContent=this.showInterface?"UI Hidden (Press H to show)":"UI Shown (Press H to hide)",this.keyIndicator.classList.add("visible"),this.keyIndicator.classList.remove("fade"),this.keyIndicatorTimeout=setTimeout(()=>{this.keyIndicator.classList.add("fade"),setTimeout(()=>{this.keyIndicator.classList.remove("visible")},300)},2e3)}updateTimeDisplay(){this.timeDisplay.textContent="Time: "+_(this.currentHour,this.currentMinute)}updateBlockCounter(s){this.blockCounter.textContent=`Blocks: ${s}`}handleReset(){this.currentHour=m,this.currentMinute=f,this.updateTimeDisplay(),this.onReset&&this.onReset()}handleToggleInterface(){this.showInterface=!this.showInterface,this.showInterface?this.interfaceElement.classList.remove("hidden"):this.interfaceElement.classList.add("hidden")}handleTogglePause(){this.isPaused=!this.isPaused,this.pauseButton.textContent=this.isPaused?"Play":"Pause",this.onTogglePause&&this.onTogglePause(this.isPaused)}advanceTime(){return this.isPaused?!1:(this.currentMinute=(this.currentMinute+1)%60,this.updateTimeDisplay(),this.currentMinute===0?(this.currentHour=(this.currentHour+1)%24,!0):!1)}getCurrentHour(){return this.currentHour}isPaused(){return this.isPaused}}class U{constructor(){this.blocksContainer=document.getElementById("blocks-container"),this.timeDisplay=document.getElementById("time-display"),this.blockCounter=document.getElementById("block-counter"),this.pauseButton=document.getElementById("pause-button"),this.resetButton=document.getElementById("reset-button"),this.toggleInterface=document.getElementById("toggle-interface"),this.interfaceElement=document.getElementById("interface"),this.initComponents(),this.isPaused=!1,this.timers={minute:null,animation:null}}initComponents(){this.ui=new O({timeDisplay:this.timeDisplay,blockCounter:this.blockCounter,pauseButton:this.pauseButton,resetButton:this.resetButton,toggleInterface:this.toggleInterface,interfaceElement:this.interfaceElement},()=>this.handleReset(),s=>this.handlePauseToggle(s)),this.blockManager=new R(this.blocksContainer,s=>this.ui.updateBlockCounter(s))}init(){this.blockManager.addBlock(m),this.startTimers()}startTimers(){this.timers.minute=setInterval(()=>{this.ui.advanceTime()&&this.blockManager.addBlock(this.ui.getCurrentHour())},1e3),this.timers.animation=setInterval(()=>{if(this.isPaused)return;const s=this.blockManager.getBlocks(),l=N(s);this.blockManager.applyHeightUpdates(l)},w)}handleReset(){this.blockManager.reset(),this.blockManager.addBlock(this.ui.getCurrentHour())}handlePauseToggle(s){this.isPaused=s}destroy(){clearInterval(this.timers.minute),clearInterval(this.timers.animation)}}document.addEventListener("DOMContentLoaded",()=>{const t=new U;t.init(),window.horizonApp=t});
