(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const o of l)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function c(l){const o={};return l.integrity&&(o.integrity=l.integrity),l.referrerPolicy&&(o.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?o.credentials="include":l.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(l){if(l.ep)return;l.ep=!0;const o=c(l);fetch(l.href,o)}})();const P=.1,H=2.2,N=0,v=10,O=.5,A=.5,_=6e4,w=100,B=.1,M=.5,S=60,D=120,y=10,$=90,L=5e3,x=12e3;function u(e,t){return e+Math.random()*(t-e)}function R(e){const t=Math.random()<O,r=Math.random()<A?"to bottom":"to right",o=Math.random()<.1?20:0;if(e>=0&&e<5){const s=30+e*5+o,n=5+e*2;return t?{type:"gradient",colors:[`hsl(230, ${s+15}%, ${n-2}%)`,`hsl(250, ${s-15}%, ${n+3}%)`],direction:r}:{type:"solid",color:`hsl(240, ${s}%, ${n}%)`}}else if(e>=5&&e<7){const i=e-5,s=50-i*10,n=50-i*5+o,a=60+i*10;return t?{type:"gradient",colors:[`hsl(${s-5}, ${n+15}%, ${a-5}%)`,`hsl(${s+10}, ${n-15}%, ${a+10}%)`],direction:r}:{type:"solid",color:`hsl(${s}, ${n}%, ${a}%)`}}else if(e>=7&&e<12){const i=e-7,s=220-i*4,n=50-i*5+o,a=70+i*2;return t?{type:"gradient",colors:[`hsl(${s-5}, ${n+20}%, ${a-5}%)`,`hsl(${s+5}, ${n-15}%, ${a+5}%)`],direction:r}:{type:"solid",color:`hsl(${s}, ${n}%, ${a}%)`}}else if(e>=12&&e<17){const i=e-12,s=200+i*5,n=25-i*3+o,a=80-i*3;return t?{type:"gradient",colors:[`hsl(${s-5}, ${n+25}%, ${a-3}%)`,`hsl(${s+5}, ${n-15}%, ${a+3}%)`],direction:r}:{type:"solid",color:`hsl(${s}, ${n}%, ${a}%)`}}else if(e>=17&&e<20){const i=e-17,s=i<1.5?15-i*8:340-(i-1.5)*15,n=75-i*8+o,a=55-i*10;return t?{type:"gradient",colors:[`hsl(${s-10}, ${n+15}%, ${a-5}%)`,`hsl(${s+25}, ${n-10}%, ${a+10}%)`],direction:r}:{type:"solid",color:`hsl(${s}, ${n}%, ${a}%)`}}else{const i=[{hue:240,sat:40+o,light:15},{hue:260,sat:50+o,light:20},{hue:280,sat:55+o,light:18},{hue:300,sat:45+o,light:16},{hue:325,sat:50+o,light:18},{hue:350,sat:55+o,light:17}],s=Math.floor(Math.random()*i.length),n=i[s];if(t){const a=(s+1+Math.floor(Math.random()*2))%i.length,h=i[a];return{type:"gradient",colors:[`hsl(${n.hue}, ${n.sat+15}%, ${n.light-2}%)`,`hsl(${h.hue}, ${h.sat}%, ${h.light+5}%)`],direction:r}}else return{type:"solid",color:`hsl(${n.hue}, ${n.sat}%, ${n.light}%)`}}}function F(e){if(Math.random()<.3){const t=[25,33,50,67,75],c=Math.floor(Math.random()*t.length);return{type:"split",splitPosition:t[c]}}return{type:"full"}}function U(e){const t=document.createElement("div");if(t.className="block-wrapper",t.id=`block-${e.id}`,e.currentHeight===void 0){const r=u(P,H);t.style.height=`${e.height*r}%`}else t.style.height=`${e.currentHeight}%`;const c=u(N,v);if(t.style.setProperty("--delay",`${c}s`),t.style.position="relative",t.style.marginBottom="-1px",e.type.type==="full"){const r=document.createElement("div");if(r.className="block",e.color.type==="solid")r.style.backgroundColor=e.color.color;else{const o=e.color.direction||"to right";r.style.background=`linear-gradient(${o}, ${e.color.colors[0]}, ${e.color.colors[1]})`}const l=B+u(-.5,M);r.style.filter=`blur(${l.toFixed(2)}px)`,t.appendChild(r)}else{const r=document.createElement("div");r.className="split-block";const l=document.createElement("div");l.className="split-left",l.style.width=`${e.type.splitPosition}%`;const o=document.createElement("div");o.className="split-right",o.style.width=`${100-e.type.splitPosition}%`;{let s=e.type.splitPosition,n=s,a=!1;const h=(g,f)=>{const d=Math.abs(f-g),T=u(S,D)*(d/50);return l.style.transition=`width ${T}s ease-in-out`,o.style.transition=`width ${T}s ease-in-out`,T*1e3},I=g=>{let d;return Math.random()<.67?d=u(y,$):d=Math.random()<.5?u(y,y+15):u($-15,$),Math.abs(d-g)<15&&(d=g+(g<50?15:-15),d=Math.max(y,Math.min($,d))),d},p=()=>{if(a)return;n=I(s);const g=h(s,n);a=!0,l.style.width=`${n}%`,o.style.width=`${100-n}%`,setTimeout(()=>{s=n,a=!1},g),setTimeout(p,g+u(L,x))},b=u(1e3,7e3),C=setTimeout(p,b);r.dataset.animationTimeout=C}if(e.color.type==="solid"){const s=e.color.color.match(/hsl\((\d+),\s*(\d+)%,\s*(\d+)%\)/);if(s){const n=parseInt(s[1]),a=parseInt(s[2]),h=parseInt(s[3]);l.style.backgroundColor=`hsl(${n-5}, ${a}%, ${h-3}%)`,o.style.backgroundColor=`hsl(${n+5}, ${a}%, ${h+3}%)`}else l.style.backgroundColor=e.color.color,o.style.backgroundColor=e.color.color}else{const s=e.color.direction||"to right";l.style.background=`linear-gradient(${s}, ${e.color.colors[0]}, ${e.color.colors[1]})`,o.style.background=`linear-gradient(${s}, ${e.color.colors[1]}, ${e.color.colors[0]})`}const i=B+u(-.5,M);r.style.filter=`blur(${i.toFixed(2)}px)`,r.appendChild(l),r.appendChild(o),t.appendChild(r)}return t}function V(e){if(e.length===0)return;const t=100;if(e.length>0){const s=e[0],n=Date.now()-s.timestamp;s.growthProgress=Math.min(n/_,1);const a=Math.pow(s.growthProgress,.3);e.length===1?s.currentHeight=.05+(t-.05)*a:s.currentHeight=.05+s.height*s.heightFactor*a}const c=e.length>0?e[0].currentHeight:0,r=t-c;let l=0;for(let s=1;s<e.length;s++)l+=e[s].height*e[s].heightFactor;const o=.2;let i=l>0?r/l:0;return i=Math.max(i,o),e.map((s,n)=>{let a;if(n===0)a=s.currentHeight;else{const p=s.height*s.heightFactor*i;a=Math.max(p,.1);const b=Date.now()-s.timestamp,C=3e3+s.id%5*500,g=.01+s.id%10*.002,f=s.id%100*.0628,d=1+g*Math.sin(b/C+f);a*=d}const h=Math.min(n/(e.length-1||1),1),I=B+h*M;return{id:s.id,targetHeight:a,zIndex:e.length-n,blurAmount:I.toFixed(2)}})}function q(e){return e.color.type==="solid"?e.color.color:`linear-gradient(${e.color.direction||"to right"}, ${e.color.colors[0]}, ${e.color.colors[1]})`}const m=24,E=5,k=0;class G{constructor(t,c){this.blocks=[],this.blocksContainer=t,this.onUpdateCounter=c}addBlock(t){const c=R(t),r=F(),l=100/Math.min(m,24)*.96;let o;Math.random()<.2?o=l*(Math.random()<.1?u(.2,.7):u(1.5,2.2)):o=l*u(.8,1.4);const i={id:Date.now(),hour:t,color:c,type:r,height:o,currentHeight:.05,timestamp:Date.now(),heightFactor:u(P,H),growthProgress:0};this.blocks.unshift(i),this.blocks.length>m&&(this.blocks=this.blocks.slice(0,m));const s=U(i);s.style.height=`${i.currentHeight}%`,s.style.zIndex=this.blocks.length,this.blocksContainer.firstChild?this.blocksContainer.insertBefore(s,this.blocksContainer.firstChild):this.blocksContainer.appendChild(s);const n=this.blocksContainer.querySelectorAll(".block-wrapper");if(n.length>m)for(let h=m;h<n.length;h++)this.blocksContainer.removeChild(n[h]);const a=q(i);return document.body.style.background=a,this.updateBlockCounter(),i}applyHeightUpdates(t){t&&t.forEach(({id:c,targetHeight:r,zIndex:l,blurAmount:o})=>{const i=document.getElementById(`block-${c}`);if(i&&(i.style.height=`${r*1.06}%`,i.style.zIndex=l,o!==void 0)){const s=i.querySelector(".block, .split-block");s&&(s.style.filter=`blur(${o}px)`)}})}updateBlockCounter(){this.onUpdateCounter&&this.onUpdateCounter(this.blocks.length)}reset(){this.blocks=[],this.blocksContainer.innerHTML=""}getBlocks(){return this.blocks}removeBlock(t){const c=document.getElementById(`block-${t}`);if(c){const r=c.querySelector(".split-block");r&&(r.dataset.animationInterval&&clearInterval(parseInt(r.dataset.animationInterval)),r.dataset.animationTimeout&&clearTimeout(parseInt(r.dataset.animationTimeout))),c.remove()}this.blocks=this.blocks.filter(r=>r.id!==t)}}function X(e,t){return`${e.toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`}class z{constructor(t,c,r){this.timeDisplay=t.timeDisplay,this.blockCounter=t.blockCounter,this.pauseButton=t.pauseButton,this.resetButton=t.resetButton,this.toggleInterface=t.toggleInterface,this.interfaceElement=t.interfaceElement,this.keyIndicator=document.getElementById("key-indicator"),this.blurOverlay=document.querySelector(".blur-overlay"),this.blurSlider=null,this.blurValue=null,this.currentBlur=50,this.currentHour=E,this.currentMinute=k,this.isPaused=!1,this.showInterface=!0,this.keyIndicatorTimeout=null,this.onReset=c,this.onTogglePause=r,this.createBlurControl(),this.setupEventListeners(),this.updateTimeDisplay()}createBlurControl(){const t=document.createElement("div");t.className="blur-control";const c=document.createElement("label");c.textContent="blur:",this.blurSlider=document.createElement("input"),this.blurSlider.type="range",this.blurSlider.min="0",this.blurSlider.max="100",this.blurSlider.value=this.currentBlur,this.blurValue=document.createElement("span"),this.blurValue.className="blur-value",this.blurValue.textContent=this.currentBlur+"px",t.appendChild(c),t.appendChild(this.blurSlider),t.appendChild(this.blurValue),this.interfaceElement.appendChild(t)}setupEventListeners(){this.resetButton.addEventListener("click",()=>this.handleReset()),this.toggleInterface.addEventListener("click",()=>this.handleToggleInterface()),this.pauseButton.addEventListener("click",()=>this.handleTogglePause()),document.addEventListener("keydown",t=>{t.key.toLowerCase()==="h"&&this.handleToggleInterface()}),this.blurSlider.addEventListener("input",t=>this.handleBlurChange(t.target.value))}handleBlurChange(t){this.currentBlur=parseInt(t,10),this.blurValue.textContent=`${this.currentBlur}px`,this.blurOverlay&&(this.blurOverlay.style.backdropFilter=`blur(${this.currentBlur}px)`,this.blurOverlay.style.webkitBackdropFilter=`blur(${this.currentBlur}px)`)}updateTimeDisplay(){this.timeDisplay.textContent="time: "+X(this.currentHour,this.currentMinute)}updateBlockCounter(t){this.blockCounter.textContent=`blocks: ${t}`}handleReset(){this.currentHour=E,this.currentMinute=k,this.updateTimeDisplay(),this.onReset&&this.onReset()}handleToggleInterface(){this.showInterface=!this.showInterface,this.showInterface?this.interfaceElement.classList.remove("hidden"):this.interfaceElement.classList.add("hidden")}handleTogglePause(){this.isPaused=!this.isPaused,this.pauseButton.textContent=this.isPaused?"Play":"Pause",this.onTogglePause&&this.onTogglePause(this.isPaused)}advanceTime(){return this.isPaused?!1:(this.currentMinute=(this.currentMinute+1)%60,this.updateTimeDisplay(),this.currentMinute===0?(this.currentHour=(this.currentHour+1)%24,!0):!1)}getCurrentHour(){return this.currentHour}isPaused(){return this.isPaused}}class K{constructor(){this.blocksContainer=document.getElementById("blocks-container"),this.timeDisplay=document.getElementById("time-display"),this.blockCounter=document.getElementById("block-counter"),this.pauseButton=document.getElementById("pause-button"),this.resetButton=document.getElementById("reset-button"),this.toggleInterface=document.getElementById("toggle-interface"),this.interfaceElement=document.getElementById("interface"),this.initComponents(),this.isPaused=!1,this.timers={minute:null,animation:null}}initComponents(){this.ui=new z({timeDisplay:this.timeDisplay,blockCounter:this.blockCounter,pauseButton:this.pauseButton,resetButton:this.resetButton,toggleInterface:this.toggleInterface,interfaceElement:this.interfaceElement},()=>this.handleReset(),t=>this.handlePauseToggle(t)),this.blockManager=new G(this.blocksContainer,t=>this.ui.updateBlockCounter(t))}init(){this.blockManager.addBlock(E),this.startTimers()}startTimers(){this.timers.minute=setInterval(()=>{this.ui.advanceTime()&&this.blockManager.addBlock(this.ui.getCurrentHour())},1e3),this.timers.animation=setInterval(()=>{if(this.isPaused)return;const t=this.blockManager.getBlocks(),c=V(t);this.blockManager.applyHeightUpdates(c)},w)}handleReset(){this.blockManager.reset(),this.blockManager.addBlock(this.ui.getCurrentHour())}handlePauseToggle(t){this.isPaused=t}destroy(){clearInterval(this.timers.minute),clearInterval(this.timers.animation)}}document.addEventListener("DOMContentLoaded",()=>{const e=new K;e.init(),window.horizonApp=e});
