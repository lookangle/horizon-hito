(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const e of n.addedNodes)e.tagName==="LINK"&&e.rel==="modulepreload"&&i(e)}).observe(document,{childList:!0,subtree:!0});function l(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(o){if(o.ep)return;o.ep=!0;const n=l(o);fetch(o.href,n)}})();const y=.6,$=1.7,b=0,H=10,E=.25,B=.5,k=6e4,T=500,g=.5,p=.2;function h(t,s){return t+Math.random()*(s-t)}function M(t){const s=Math.random()<E,i=Math.random()<B?"to bottom":"to right";if(t>=0&&t<5){const n=30+t*5,e=5+t*2;return s?{type:"gradient",colors:[`hsl(230, ${n}%, ${e-2}%)`,`hsl(250, ${n-5}%, ${e+3}%)`],direction:i}:{type:"solid",color:`hsl(240, ${n}%, ${e}%)`}}else if(t>=5&&t<7){const o=30-(t-5)*10,n=80-(t-5)*10,e=50+(t-5)*10;return s?{type:"gradient",colors:[`hsl(${o-10}, ${n}%, ${e-5}%)`,`hsl(${o+10}, ${n-10}%, ${e+10}%)`],direction:i}:{type:"solid",color:`hsl(${o}, ${n}%, ${e}%)`}}else if(t>=7&&t<12){const n=70-(t-7)*5,e=70+(t-7)*2;return s?{type:"gradient",colors:[`hsl(205, ${n+5}%, ${e-5}%)`,`hsl(215, ${n-5}%, ${e+5}%)`],direction:i}:{type:"solid",color:`hsl(210, ${n}%, ${e}%)`}}else if(t>=12&&t<17){const n=55-(t-12)*5,e=80-(t-12)*2;return s?{type:"gradient",colors:[`hsl(205, ${n+5}%, ${e-3}%)`,`hsl(215, ${n-5}%, ${e+3}%)`],direction:i}:{type:"solid",color:`hsl(210, ${n}%, ${e}%)`}}else if(t>=17&&t<20){const o=25+(t-17)*5,n=80-(t-17)*10,e=60-(t-17)*15;return s?{type:"gradient",colors:[`hsl(${o-10}, ${n+10}%, ${e-5}%)`,`hsl(${o+10}, ${n-10}%, ${e+10}%)`],direction:i}:{type:"solid",color:`hsl(${o}, ${n}%, ${e}%)`}}else{const n=40-(t-20)*5,e=15-(t-20)*3;return s?{type:"gradient",colors:[`hsl(230, ${n+5}%, ${e-2}%)`,`hsl(250, ${n-5}%, ${e+2}%)`],direction:i}:{type:"solid",color:`hsl(240, ${n}%, ${e}%)`}}}function P(t){if(t>=5&&t<7||t>=17&&t<20||Math.random()<.3){const l=[25,33,50,67,75],i=Math.floor(Math.random()*l.length);return{type:"split",splitPosition:l[i]}}return{type:"full"}}function A(t){const s=document.createElement("div");if(s.className="block-wrapper",s.id=`block-${t.id}`,t.currentHeight===void 0){const i=h(y,$);s.style.height=`${t.height*i}%`}const l=h(b,H);if(s.style.setProperty("--delay",`${l}s`),t.type.type==="full"){const i=document.createElement("div");if(i.className="block",t.color.type==="solid")i.style.backgroundColor=t.color.color;else{const n=t.color.direction||"to right";i.style.background=`linear-gradient(${n}, ${t.color.colors[0]}, ${t.color.colors[1]})`}const o=g+h(-.2,p);i.style.filter=`blur(${o.toFixed(2)}px)`,s.appendChild(i)}else{const i=document.createElement("div");i.className="split-block";const o=document.createElement("div");o.className="split-left",o.style.width=`${t.type.splitPosition}%`;const n=document.createElement("div");if(n.className="split-right",n.style.width=`${100-t.type.splitPosition}%`,t.color.type==="solid"){const r=t.color.color.match(/hsl\((\d+),\s*(\d+)%,\s*(\d+)%\)/);if(r){const c=parseInt(r[1]),u=parseInt(r[2]),a=parseInt(r[3]);o.style.backgroundColor=`hsl(${c-5}, ${u}%, ${a-3}%)`,n.style.backgroundColor=`hsl(${c+5}, ${u}%, ${a+3}%)`}else o.style.backgroundColor=t.color.color,n.style.backgroundColor=t.color.color}else{const r=t.color.direction||"to right";o.style.background=`linear-gradient(${r}, ${t.color.colors[0]}, ${t.color.colors[1]})`,n.style.background=`linear-gradient(${r}, ${t.color.colors[1]}, ${t.color.colors[0]})`}const e=g+h(-.2,p);i.style.filter=`blur(${e.toFixed(2)}px)`,i.appendChild(o),i.appendChild(n),s.appendChild(i)}return s}function w(t){if(t.length===0)return;const s=100;if(t.length>0){const e=t[0],r=Date.now()-e.timestamp;e.growthProgress=Math.min(r/k,1);const c=Math.pow(e.growthProgress,1/3);e.currentHeight=.05+e.height*e.heightFactor*c}const l=t.length>0?t[0].currentHeight:0,i=s-l;let o=0;for(let e=1;e<t.length;e++)o+=t[e].height*t[e].heightFactor;const n=o>0?i/o:0;return t.map((e,r)=>{let c;if(r===0)c=e.currentHeight;else{c=e.height*e.heightFactor*n;const C=Date.now()-e.timestamp,I=1+.005*Math.sin(C/15e3);c*=I}const u=Math.min(r/(t.length-1||1),1),a=g+u*p;return{id:e.id,targetHeight:c,zIndex:t.length-r,blurAmount:a.toFixed(2)}})}function N(t){return t.color.type==="solid"?t.color.color:`linear-gradient(${t.color.direction||"to right"}, ${t.color.colors[0]}, ${t.color.colors[1]})`}const d=24,m=5,f=0;class D{constructor(s,l){this.blocks=[],this.blocksContainer=s,this.onUpdateCounter=l}addBlock(s){const l=M(s),i=P(s),o=100/Math.min(d,24)*.98;let n;Math.random()<.2?n=o*(Math.random()<.5?h(.4,.7):h(1.5,2.2)):n=o*h(.8,1.4);const e={id:Date.now(),hour:s,color:l,type:i,height:n,currentHeight:.05,timestamp:Date.now(),heightFactor:h(y,$),growthProgress:0};this.blocks.unshift(e),this.blocks.length>d&&(this.blocks=this.blocks.slice(0,d));const r=A(e);r.style.height=`${e.currentHeight}%`,r.style.zIndex=this.blocks.length,this.blocksContainer.firstChild?this.blocksContainer.insertBefore(r,this.blocksContainer.firstChild):this.blocksContainer.appendChild(r);const c=this.blocksContainer.querySelectorAll(".block-wrapper");if(c.length>d)for(let a=d;a<c.length;a++)this.blocksContainer.removeChild(c[a]);const u=N(e);return document.body.style.background=u,this.updateBlockCounter(),e}applyHeightUpdates(s){s&&s.forEach(({id:l,targetHeight:i,zIndex:o,blurAmount:n})=>{const e=document.getElementById(`block-${l}`);if(e&&(e.style.height=`${i*1.05}%`,e.style.zIndex=o,n!==void 0)){const r=e.querySelector(".block, .split-block");r&&(r.style.filter=`blur(${n}px)`)}})}updateBlockCounter(){this.onUpdateCounter&&this.onUpdateCounter(this.blocks.length)}reset(){this.blocks=[],this.blocksContainer.innerHTML=""}getBlocks(){return this.blocks}}function L(t,s){return`${t.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`}class R{constructor(s,l,i){this.timeDisplay=s.timeDisplay,this.blockCounter=s.blockCounter,this.pauseButton=s.pauseButton,this.resetButton=s.resetButton,this.toggleInterface=s.toggleInterface,this.interfaceElement=s.interfaceElement,this.currentHour=m,this.currentMinute=f,this.isPaused=!1,this.showInterface=!0,this.onReset=l,this.onTogglePause=i,this.setupEventListeners(),this.updateTimeDisplay()}setupEventListeners(){this.resetButton.addEventListener("click",()=>this.handleReset()),this.toggleInterface.addEventListener("click",()=>this.handleToggleInterface()),this.pauseButton.addEventListener("click",()=>this.handleTogglePause())}updateTimeDisplay(){this.timeDisplay.textContent=L(this.currentHour,this.currentMinute)}updateBlockCounter(s){this.blockCounter.textContent=`Blocks: ${s}`}handleReset(){this.currentHour=m,this.currentMinute=f,this.updateTimeDisplay(),this.onReset&&this.onReset()}handleToggleInterface(){this.showInterface=!this.showInterface,this.showInterface?(this.interfaceElement.style.display="block",this.toggleInterface.textContent="Hide UI"):(this.interfaceElement.style.display="none",this.toggleInterface.textContent="Show UI")}handleTogglePause(){this.isPaused=!this.isPaused,this.pauseButton.textContent=this.isPaused?"Play":"Pause",this.onTogglePause&&this.onTogglePause(this.isPaused)}advanceTime(){return this.isPaused?!1:(this.currentMinute=(this.currentMinute+1)%60,this.updateTimeDisplay(),this.currentMinute===0?(this.currentHour=(this.currentHour+1)%24,!0):!1)}getCurrentHour(){return this.currentHour}isPaused(){return this.isPaused}}class v{constructor(){this.blocksContainer=document.getElementById("blocks-container"),this.timeDisplay=document.getElementById("time-display"),this.blockCounter=document.getElementById("block-counter"),this.pauseButton=document.getElementById("pause-button"),this.resetButton=document.getElementById("reset-button"),this.toggleInterface=document.getElementById("toggle-interface"),this.interfaceElement=document.getElementById("interface"),this.initComponents(),this.isPaused=!1,this.timers={minute:null,animation:null}}initComponents(){this.ui=new R({timeDisplay:this.timeDisplay,blockCounter:this.blockCounter,pauseButton:this.pauseButton,resetButton:this.resetButton,toggleInterface:this.toggleInterface,interfaceElement:this.interfaceElement},()=>this.handleReset(),s=>this.handlePauseToggle(s)),this.blockManager=new D(this.blocksContainer,s=>this.ui.updateBlockCounter(s))}init(){this.blockManager.addBlock(m),this.startTimers()}startTimers(){this.timers.minute=setInterval(()=>{this.ui.advanceTime()&&this.blockManager.addBlock(this.ui.getCurrentHour())},1e3),this.timers.animation=setInterval(()=>{if(this.isPaused)return;const s=this.blockManager.getBlocks(),l=w(s);this.blockManager.applyHeightUpdates(l)},T)}handleReset(){this.blockManager.reset(),this.blockManager.addBlock(this.ui.getCurrentHour())}handlePauseToggle(s){this.isPaused=s}destroy(){clearInterval(this.timers.minute),clearInterval(this.timers.animation)}}document.addEventListener("DOMContentLoaded",()=>{const t=new v;t.init(),window.horizonApp=t});
