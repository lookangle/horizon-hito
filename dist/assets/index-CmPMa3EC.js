(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function c(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(a){if(a.ep)return;a.ep=!0;const o=c(a);fetch(a.href,o)}})();const k=.1,P=2.2,H=0,N=10,v=.5,O=.5,A=6e4,_=100,E=.1,B=.5,w=60,L=120,y=10,$=90,D=5e3,x=12e3;function h(e,t){return e+Math.random()*(t-e)}function R(e){const t=Math.random()<v,r=Math.random()<O?"to bottom":"to right",o=Math.random()<.1?20:0;if(e>=0&&e<5){const n=30+e*5+o,s=5+e*2;return t?{type:"gradient",colors:[`hsl(230, ${n+15}%, ${s-2}%)`,`hsl(250, ${n-15}%, ${s+3}%)`],direction:r}:{type:"solid",color:`hsl(240, ${n}%, ${s}%)`}}else if(e>=5&&e<7){const i=e-5,n=50-i*10,s=50-i*5+o,l=60+i*10;return t?{type:"gradient",colors:[`hsl(${n-5}, ${s+15}%, ${l-5}%)`,`hsl(${n+10}, ${s-15}%, ${l+10}%)`],direction:r}:{type:"solid",color:`hsl(${n}, ${s}%, ${l}%)`}}else if(e>=7&&e<12){const i=e-7,n=220-i*4,s=50-i*5+o,l=70+i*2;return t?{type:"gradient",colors:[`hsl(${n-5}, ${s+20}%, ${l-5}%)`,`hsl(${n+5}, ${s-15}%, ${l+5}%)`],direction:r}:{type:"solid",color:`hsl(${n}, ${s}%, ${l}%)`}}else if(e>=12&&e<17){const i=e-12,n=200+i*5,s=25-i*3+o,l=80-i*3;return t?{type:"gradient",colors:[`hsl(${n-5}, ${s+25}%, ${l-3}%)`,`hsl(${n+5}, ${s-15}%, ${l+3}%)`],direction:r}:{type:"solid",color:`hsl(${n}, ${s}%, ${l}%)`}}else if(e>=17&&e<20){const i=e-17,n=i<1.5?15-i*8:340-(i-1.5)*15,s=75-i*8+o,l=55-i*10;return t?{type:"gradient",colors:[`hsl(${n-10}, ${s+15}%, ${l-5}%)`,`hsl(${n+25}, ${s-10}%, ${l+10}%)`],direction:r}:{type:"solid",color:`hsl(${n}, ${s}%, ${l}%)`}}else{const i=[{hue:240,sat:40+o,light:15},{hue:260,sat:50+o,light:20},{hue:280,sat:55+o,light:18},{hue:300,sat:45+o,light:16},{hue:325,sat:50+o,light:18},{hue:350,sat:55+o,light:17}],n=Math.floor(Math.random()*i.length),s=i[n];if(t){const l=(n+1+Math.floor(Math.random()*2))%i.length,u=i[l];return{type:"gradient",colors:[`hsl(${s.hue}, ${s.sat+15}%, ${s.light-2}%)`,`hsl(${u.hue}, ${u.sat}%, ${u.light+5}%)`],direction:r}}else return{type:"solid",color:`hsl(${s.hue}, ${s.sat}%, ${s.light}%)`}}}function F(e){if(Math.random()<.3){const t=[25,33,50,67,75],c=Math.floor(Math.random()*t.length);return{type:"split",splitPosition:t[c]}}return{type:"full"}}function U(e){const t=document.createElement("div");if(t.className="block-wrapper",t.id=`block-${e.id}`,e.currentHeight===void 0){const r=h(k,P);t.style.height=`${e.height*r}%`}else t.style.height=`${e.currentHeight}%`;const c=h(H,N);if(t.style.setProperty("--delay",`${c}s`),t.style.position="relative",t.style.marginBottom="-1px",e.type.type==="full"){const r=document.createElement("div");if(r.className="block",e.color.type==="solid")r.style.backgroundColor=e.color.color;else{const o=e.color.direction||"to right";r.style.background=`linear-gradient(${o}, ${e.color.colors[0]}, ${e.color.colors[1]})`}const a=E+h(-.5,B);r.style.filter=`blur(${a.toFixed(2)}px)`,t.appendChild(r)}else{const r=document.createElement("div");r.className="split-block";const a=document.createElement("div");a.className="split-left",a.style.width=`${e.type.splitPosition}%`;const o=document.createElement("div");o.className="split-right",o.style.width=`${100-e.type.splitPosition}%`;{let n=e.type.splitPosition,s=n,l=!1;const u=(g,f)=>{const d=Math.abs(f-g),T=h(w,L)*(d/50);return a.style.transition=`width ${T}s ease-in-out`,o.style.transition=`width ${T}s ease-in-out`,T*1e3},I=g=>{let d;return Math.random()<.67?d=h(y,$):d=Math.random()<.5?h(y,y+15):h($-15,$),Math.abs(d-g)<15&&(d=g+(g<50?15:-15),d=Math.max(y,Math.min($,d))),d},p=()=>{if(l)return;s=I(n);const g=u(n,s);l=!0,a.style.width=`${s}%`,o.style.width=`${100-s}%`,setTimeout(()=>{n=s,l=!1},g),setTimeout(p,g+h(D,x))},C=h(1e3,7e3),b=setTimeout(p,C);r.dataset.animationTimeout=b}if(e.color.type==="solid"){const n=e.color.color.match(/hsl\((\d+),\s*(\d+)%,\s*(\d+)%\)/);if(n){const s=parseInt(n[1]),l=parseInt(n[2]),u=parseInt(n[3]);a.style.backgroundColor=`hsl(${s-5}, ${l}%, ${u-3}%)`,o.style.backgroundColor=`hsl(${s+5}, ${l}%, ${u+3}%)`}else a.style.backgroundColor=e.color.color,o.style.backgroundColor=e.color.color}else{const n=e.color.direction||"to right";a.style.background=`linear-gradient(${n}, ${e.color.colors[0]}, ${e.color.colors[1]})`,o.style.background=`linear-gradient(${n}, ${e.color.colors[1]}, ${e.color.colors[0]})`}const i=E+h(-.5,B);r.style.filter=`blur(${i.toFixed(2)}px)`,r.appendChild(a),r.appendChild(o),t.appendChild(r)}return t}function V(e){if(e.length===0)return;const t=100;if(e.length>0){const n=e[0],s=Date.now()-n.timestamp;n.growthProgress=Math.min(s/A,1);const l=Math.pow(n.growthProgress,.3);e.length===1?n.currentHeight=.05+(t-.05)*l:n.currentHeight=.05+n.height*n.heightFactor*l}const c=e.length>0?e[0].currentHeight:0,r=t-c;let a=0;for(let n=1;n<e.length;n++)a+=e[n].height*e[n].heightFactor;const o=.2;let i=a>0?r/a:0;return i=Math.max(i,o),e.map((n,s)=>{let l;if(s===0)l=n.currentHeight;else{const p=n.height*n.heightFactor*i;l=Math.max(p,.1);const C=Date.now()-n.timestamp,b=3e3+n.id%5*500,g=.01+n.id%10*.002,f=n.id%100*.0628,d=1+g*Math.sin(C/b+f);l*=d}const u=Math.min(s/(e.length-1||1),1),I=E+u*B;return{id:n.id,targetHeight:l,zIndex:e.length-s,blurAmount:I.toFixed(2)}})}function q(e){return e.color.type==="solid"?e.color.color:`linear-gradient(${e.color.direction||"to right"}, ${e.color.colors[0]}, ${e.color.colors[1]})`}const m=24,M=5,S=0;class G{constructor(t,c){this.blocks=[],this.blocksContainer=t,this.onUpdateCounter=c}addBlock(t){const c=R(t),r=F(),a=100/Math.min(m,24)*.96;let o;Math.random()<.2?o=a*(Math.random()<.1?h(.2,.7):h(1.5,2.2)):o=a*h(.8,1.4);const i={id:Date.now(),hour:t,color:c,type:r,height:o,currentHeight:.05,timestamp:Date.now(),heightFactor:h(k,P),growthProgress:0};this.blocks.unshift(i),this.blocks.length>m&&(this.blocks=this.blocks.slice(0,m));const n=U(i);n.style.height=`${i.currentHeight}%`,n.style.zIndex=this.blocks.length,this.blocksContainer.firstChild?this.blocksContainer.insertBefore(n,this.blocksContainer.firstChild):this.blocksContainer.appendChild(n);const s=this.blocksContainer.querySelectorAll(".block-wrapper");if(s.length>m)for(let u=m;u<s.length;u++)this.blocksContainer.removeChild(s[u]);const l=q(i);return document.body.style.background=l,this.updateBlockCounter(),i}applyHeightUpdates(t){t&&t.forEach(({id:c,targetHeight:r,zIndex:a,blurAmount:o})=>{const i=document.getElementById(`block-${c}`);if(i&&(i.style.height=`${r*1.06}%`,i.style.zIndex=a,o!==void 0)){const n=i.querySelector(".block, .split-block");n&&(n.style.filter=`blur(${o}px)`)}})}updateBlockCounter(){this.onUpdateCounter&&this.onUpdateCounter(this.blocks.length)}reset(){this.blocks=[],this.blocksContainer.innerHTML=""}getBlocks(){return this.blocks}removeBlock(t){const c=document.getElementById(`block-${t}`);if(c){const r=c.querySelector(".split-block");r&&(r.dataset.animationInterval&&clearInterval(parseInt(r.dataset.animationInterval)),r.dataset.animationTimeout&&clearTimeout(parseInt(r.dataset.animationTimeout))),c.remove()}this.blocks=this.blocks.filter(r=>r.id!==t)}}function X(e,t){return`${e.toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`}class z{constructor(t,c,r){this.timeDisplay=t.timeDisplay,this.blockCounter=t.blockCounter,this.pauseButton=t.pauseButton,this.resetButton=t.resetButton,this.toggleInterface=t.toggleInterface,this.interfaceElement=t.interfaceElement,this.keyIndicator=document.getElementById("key-indicator"),this.blurOverlay=document.querySelector(".blur-overlay"),this.blurSlider=null,this.blurValue=null,this.saturationSlider=null,this.saturationValue=null,this.currentBlur=10,this.currentSaturation=100,this.currentHour=M,this.currentMinute=S,this.isPaused=!1,this.showInterface=!0,this.keyIndicatorTimeout=null,this.onReset=c,this.onTogglePause=r,this.createBlurControl(),this.createSaturationControl(),this.setupEventListeners(),this.updateTimeDisplay()}createBlurControl(){const t=document.createElement("div");t.className="blur-control";const c=document.createElement("label");c.textContent="blur:",this.blurSlider=document.createElement("input"),this.blurSlider.type="range",this.blurSlider.min="0",this.blurSlider.max="100",this.blurSlider.value=this.currentBlur,this.blurValue=document.createElement("span"),this.blurValue.className="blur-value",this.blurValue.textContent=this.currentBlur+"px",t.appendChild(c),t.appendChild(this.blurSlider),t.appendChild(this.blurValue),this.interfaceElement.appendChild(t)}createSaturationControl(){const t=document.createElement("div");t.className="saturation-control";const c=document.createElement("label");c.textContent="saturation:",this.saturationSlider=document.createElement("input"),this.saturationSlider.type="range",this.saturationSlider.min="0",this.saturationSlider.max="200",this.saturationSlider.value=this.currentSaturation,this.saturationValue=document.createElement("span"),this.saturationValue.className="saturation-value",this.saturationValue.textContent=this.currentSaturation+"%",t.appendChild(c),t.appendChild(this.saturationSlider),t.appendChild(this.saturationValue),this.interfaceElement.appendChild(t),this.handleSaturationChange(this.currentSaturation)}setupEventListeners(){this.resetButton.addEventListener("click",()=>this.handleReset()),this.toggleInterface.addEventListener("click",()=>this.handleToggleInterface()),this.pauseButton.addEventListener("click",()=>this.handleTogglePause()),document.addEventListener("keydown",t=>{t.key.toLowerCase()==="h"&&this.handleToggleInterface()}),this.blurSlider.addEventListener("input",t=>this.handleBlurChange(t.target.value)),this.saturationSlider.addEventListener("input",t=>this.handleSaturationChange(t.target.value))}handleBlurChange(t){this.currentBlur=parseInt(t,10),this.blurValue.textContent=`${this.currentBlur}px`,this.blurOverlay&&(this.blurOverlay.style.backdropFilter=`blur(${this.currentBlur}px)`,this.blurOverlay.style.webkitBackdropFilter=`blur(${this.currentBlur}px)`)}handleSaturationChange(t){this.currentSaturation=parseInt(t,10),this.saturationValue.textContent=`${this.currentSaturation}%`,document.documentElement.style.setProperty("--global-saturation",`${this.currentSaturation}%`)}updateTimeDisplay(){this.timeDisplay.textContent="time: "+X(this.currentHour,this.currentMinute)}updateBlockCounter(t){this.blockCounter.textContent=`blocks: ${t}`}handleReset(){this.currentHour=M,this.currentMinute=S,this.updateTimeDisplay(),this.onReset&&this.onReset()}handleToggleInterface(){this.showInterface=!this.showInterface,this.showInterface?this.interfaceElement.classList.remove("hidden"):this.interfaceElement.classList.add("hidden")}handleTogglePause(){this.isPaused=!this.isPaused,this.pauseButton.textContent=this.isPaused?"Play":"Pause",this.onTogglePause&&this.onTogglePause(this.isPaused)}advanceTime(){return this.isPaused?!1:(this.currentMinute=(this.currentMinute+1)%60,this.updateTimeDisplay(),this.currentMinute===0?(this.currentHour=(this.currentHour+1)%24,!0):!1)}getCurrentHour(){return this.currentHour}isPaused(){return this.isPaused}}class K{constructor(){this.blocksContainer=document.getElementById("blocks-container"),this.timeDisplay=document.getElementById("time-display"),this.blockCounter=document.getElementById("block-counter"),this.pauseButton=document.getElementById("pause-button"),this.resetButton=document.getElementById("reset-button"),this.toggleInterface=document.getElementById("toggle-interface"),this.interfaceElement=document.getElementById("interface"),this.initComponents(),this.isPaused=!1,this.timers={minute:null,animation:null}}initComponents(){this.ui=new z({timeDisplay:this.timeDisplay,blockCounter:this.blockCounter,pauseButton:this.pauseButton,resetButton:this.resetButton,toggleInterface:this.toggleInterface,interfaceElement:this.interfaceElement},()=>this.handleReset(),t=>this.handlePauseToggle(t)),this.blockManager=new G(this.blocksContainer,t=>this.ui.updateBlockCounter(t))}init(){this.blockManager.addBlock(M),this.startTimers()}startTimers(){this.timers.minute=setInterval(()=>{this.ui.advanceTime()&&this.blockManager.addBlock(this.ui.getCurrentHour())},1e3),this.timers.animation=setInterval(()=>{if(this.isPaused)return;const t=this.blockManager.getBlocks(),c=V(t);this.blockManager.applyHeightUpdates(c)},_)}handleReset(){this.blockManager.reset(),this.blockManager.addBlock(this.ui.getCurrentHour())}handlePauseToggle(t){this.isPaused=t}destroy(){clearInterval(this.timers.minute),clearInterval(this.timers.animation)}}document.addEventListener("DOMContentLoaded",()=>{const e=new K;e.init(),window.horizonApp=e});
